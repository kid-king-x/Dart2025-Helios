import{_,r as x,o as p,w as k,a as b,c as P,b as f,d as g,t as y,F as S,u as X,e as Y,f as C}from"./index-BTOY_Jda.js";const M={name:"grabTouch",props:{width:{type:Number,default:660},height:{type:Number,default:374}},setup(s){const o=x(null),d=x({x:s.width/2,y:s.height/2}),n=x({x:"-",y:"-"}),m=X(),T=async c=>{const t=c.touches[0];if(t){const a=t.clientX/1702*s.width,i=(t.clientY+74)/1066*s.height;n.value.x=((t.clientX/1702-.5)*600).toFixed(2),n.value.y=((.5-(t.clientY+74)/1066)*340).toFixed(2);const l=o.value.getContext("2d");l.fillStyle="red",l.beginPath(),l.arc(a,i,5,0,Math.PI*2),l.fill();const h={dartX_value:n.value.x,dartY_value:n.value.y};try{await fetch("http://localhost:3000/touch/writeToTouch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})}catch(u){console.error("Error sending data:",u)}m.push("/")}},r=()=>{const c=o.value;if(!c)return;const t=c.getContext("2d"),{width:a,height:i}=s,{x:l,y:h}=d.value;t.clearRect(0,0,a,i),t.strokeStyle="#f6d5d5",t.lineWidth=1;for(let e=a/30;e<=a;e+=a/15)t.beginPath(),t.moveTo(e,0),t.lineTo(e,i),t.stroke();for(let e=a/60;e<=i;e+=a/15)t.beginPath(),t.moveTo(0,e),t.lineTo(a,e),t.stroke();t.strokeStyle="#eaa2a9",t.lineWidth=2,t.beginPath(),t.moveTo(0,h),t.lineTo(a,h),t.stroke(),t.beginPath(),t.moveTo(l,0),t.lineTo(l,i),t.stroke(),t.fillStyle="#eaa2a9",t.font="12px Arial";let u=-280,v=160;for(let e=a/30;e<=a;e+=a/15)t.fillText(u,e,h-2),u=u+40;for(let e=a/60;e<=i;e+=a/15)v!==0&&t.fillText(v,l+2,e-2),v=v-40},w=c=>{c.preventDefault()};return p(()=>{r(),document.addEventListener("touchmove",w,{passive:!1})}),k([()=>s.width,()=>s.height],r),{drawCanvas:o,handleTouchMove:T,dart:n}}},N=["width","height"],B={class:"value-display"},F={class:"value-display"};function $(s,o,d,n,m,T){return b(),P(S,null,[f("canvas",{ref:"drawCanvas",width:d.width,height:d.height,onTouchmove:o[0]||(o[0]=(...r)=>n.handleTouchMove&&n.handleTouchMove(...r))},null,40,N),f("div",B,[o[1]||(o[1]=g("X坐标: ")),f("span",null,y(n.dart.x),1),o[2]||(o[2]=g(" mm"))]),f("div",F,[o[3]||(o[3]=g("Y坐标: ")),f("span",null,y(n.dart.y),1),o[4]||(o[4]=g(" mm"))])],64)}const E=_(M,[["render",$],["__scopeId","data-v-4b8b2c5a"]]),D={components:{grabTouch:E}};function I(s,o,d,n,m,T){const r=C("grabTouch");return b(),Y(r,{width:1650,height:935})}const R=_(D,[["render",I]]);export{R as default};
